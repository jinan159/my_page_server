<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Post">

  <sql id="ORDER_BY">
    <choose>
      <when test="sort == 'ASC'">
        ORDER BY ${col} ASC
      </when>
      <if test="sort == 'DESC'">
        ORDER BY ${col} DESC
      </if>
    </choose>
  </sql>

  <select id="findAllPost">
    SELECT id
         , title
         , writer
         , content
         , start_date
         , end_date
         , write_datetime
         , modified_datetime
      FROM post
      <include refid="ORDER_BY">
        <property name="col" value="start_date"/>
      </include>
      <if test="start > -1 AND count > -1">
        LIMIT ${start}, ${count}
      </if>
  </select>

</mapper>